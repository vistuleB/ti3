<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
  <meta name="description" content="Section 6.2 of TI3 - Theoretische Informatik 2">
  <link rel="stylesheet" type="text/css" href="app.css" />
  <script type="text/javascript" src="./mathjax_setup.js"></script>
  <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
  <script type="text/javascript" src="./app.js"></script>
  <title>TI3 - Chapter 6, Section 2</title>
</head>
<body>
  <div class="body-wrapper">
    <div id="menu">
      <div class="menu-left">
        <a href="./index.html"><span class="inhalts_arrows">&lt;&lt;
          </span>Inhaltsverzeichnis</a><a
          id="prev-page"
          href="./6-1.html"
        >&lt;&lt; Kapitel 6.1<span
            style="visibility:hidden"
            id="prev-page-tooltip"
          >
            <p>
              Ableitungen und Ableitungsbäume
            </p>
          </span></a>
      </div>
      <div class="menu-right">
        <a href="https://www.tu-chemnitz.de/informatik/theoretische-informatik/TI-2/index.html.en">zür Kursübersicht</a><a
          id="next-page"
          href="./6-3.html"
        >Kapitel 6.3 &gt;&gt;<span
            style="visibility:hidden"
            id="next-page-tooltip"
          >
            <p>
              Rechnerübung: Gute kontextfreie Grammatiken entwerfen
            </p>
          </span></a>
      </div>
    </div>
    <div class="main-column page-title">
      <p>
        6.2&ensp;Kontextfreie Grammatiken und Kellerautomaten
      </p>
    </div>
    <div class="well statement out">
      <p>
        <b>Theorem</b>
        <b>6.2.1</b>
        Zu jeder kontextfreien Grammatik $G = (\Sigma, N, S, P)$ gibt es
        einen Kellerautomaten
        <span class="nowrap">$M = (\Sigma, Q, \Gamma, \qstart, \delta)$,</span>
        der die gleiche Sprache akzeptiert, also
        <span class="nowrap">$L(G) = L(M)$.</span>
      </p>
    </div>
    <div class="well highlight out">
      <p>
        <b>Beweis.</b>
        Der Beweis ist vergleichsweise einfach, weil wir die Grammatik
        eins zu eins in Automatentransitionen übersetzen können. Die Idee
        ist, dass die Symbole auf dem Stack, von unten nach oben gelesen,
        zu jedem Zeitpunkt eine Wortform bilden, aus der der noch nicht
        gelesene Teil des Restwortes ableitbar ist. Wenn oben auf dem
        Stack also ein Terminalsymbol $x$ liegt und $x$ auch das nächste
        Inputzeichen ist, dann poppen wir $x$ vom Stack und lesen
        <span class="nowrap">$x$,</span>
        d.h. schieben den Lesekopf um ein Zeichen nach rechts; der Stack
        ist von $x \alpha$ auf $\alpha$ geschruft und das Restwort von
        $xw$ auf
        <span class="nowrap">$w$;</span>
        wenn also $x\alpha \Rightarrow^* xw$ galt, so gilt
        nun immer noch
        <span class="nowrap">$\alpha \Rightarrow^* w$.</span>
        Wenn ein Nichtterminal
        $X$ oben auf dem Stack liegt, dieser also die Form $X \alpha$
        hat, und $w$ das Restwort ist, dann gilt also
        <span class="nowrap">$X \alpha \Rightarrow^* w$.</span>
        Der Automat rät nun
        nichtdeterministisch die erste in der Ableitung angewandte
        Produktion
        <span class="nowrap">$X \rightarrow \beta$,</span>
        löscht $X$ vom Stack und pusht
        <span class="nowrap">$\beta$.</span>
        Der Stack ist nun
        <span class="nowrap">$\beta \alpha$,</span>
        und
        <span class="nowrap">$\beta \alpha \Rightarrow^* w$.</span>
        Entscheidend ist der
        Nichtdeterminismus: es
        <i>gibt</i>
        eine korrekte Produktion
        <span class="nowrap">$X \rightarrow \beta$,</span>
        die schlussendlich zu $w$ führt; der
        Automat
        <i>kann</i>
        also diese Transition anwenden. Formaler: Die
        Zustände des Automaten sind
        <span class="nowrap">$Q = \{\qstart, q_1, \qend\}$,</span>
        das
        Stackalphabet ist \(\Gamma = \Sigma \cup N \cup \{\$\}\) und die
        Transitionsregeln sind
      </p>
      <div class="math-block">
        $$
        \begin{align*}
        (q_1, x)&amp;\step{x} (q_1, \epsilon) \quad \textnormal{für jedes $x \in \Sigma$}\\
        (q_1, A)&amp;\step{\epsilon} (q_1, \beta) \quad \textnormal{für jede Produktion $A \rightarrow
        \beta$}\\ \hline
        (\qstart, \epsilon)&amp;\step{\epsilon} (q_1, S \$) \\
        (q_1, \$)&amp;\step{\epsilon} (\qend, \epsilon)
        \end{align*}
        $$
      </div>
      <p>
        Auf einen formalen Beweis, dass $L(M) = L(G)$ ist, verzichte ich
        an dieser Stelle. Besser als Sipser in seinem Lehrbuch
        <i>Introduction to the Theory of Computing</i>
        könnte ich das eh
        nicht.<span style="color:#0000;visibility:none;">A</span><span class="qed">\(\square\)</span>
      </p>
    </div>
    <div class="well statement out">
      <p>
        <b>Beispiel</b>
        <b>6.2.2</b>
        Betrachten wir die Grammatik
      </p>
      <div class="math-block">
        $$
        \begin{align*}
        S&amp;\rightarrow A \ | \ B \ | \ C \ | \ \epsilon \\
        A&amp;\rightarrow \texttt{\{} B \texttt{\}} S \\
        B&amp;\rightarrow \texttt{[} C \texttt{]} S \\
        C&amp;\rightarrow \texttt{(} A \texttt{)} S \ | \ \texttt{()}S \\
        \end{align*}
        $$
      </div>
      <p>
        Ein Wort in der erzeugten Sprache wäre zum Beispiel
        <code>{<a href="">()()</a>}()</code>
        Schreiben wir nun einen Kellerautomaten, der diese
        Sprache akzeptiert. Die Idee ist, dass wir Terminalsymbole und
        Nichtterminalsymbole auf den Stack legen. Ein
        <code>[</code>
        oben auf dem
        Stack bedeutet dann
        <span class="nowrap"><i>ich will jetzt sofort ein
            <span class="nowrap"><code>[</code>lesen</span></i>;</span>
        ein
        Nichtterminal wie $A$ oben auf dem Stack bedeutet, dass wir als
        nächstes ein von  $A$ ableitbares Wort, also ein
        $A \rightarrow w \in \Sigma^*$ lesen wollen. Um ein $w$ mit
        $A \rightarrow w$ lesen zu können, müssen wir
        <i>sofort</i>
        ein
        <code>{</code>
        lesen, dann ein Wort $v$ mit
        <span class="nowrap">$B \rightarrow v$,</span>
        dann ein
        <code>}</code>
        und
        so weiter. Wir können das also im Automaten implementieren, indem
        wir $A$ vom Stack löschen und durch $\texttt{\{} B \texttt{\}} S$
        auf den Stack legen, mit dem linkesten Symbol zuoberst. Wenn wir
        für ein Nichtterminal mehrere Regeln haben, also z.B.
        $X \rightarrow \alpha$ und
        <span class="nowrap">$X \rightarrow \beta$,</span>
        dann können
        ein $X$ auf dem Stack sowohl durch $\alpha$ als auch durch
        $\beta$ ersetzen. Hierfür benötigen wir den Nichtdeterminismus.
        Beachten Sie, dass wir ein Nichtterminal grundsätzlich immer
        durch die entsprechende rechte Seite ersetzen können, egal, was
        das nächste Zeichen ist; es wird im Automaten also ein
        <span class="nowrap">$\step{\epsilon}$-Übergang</span>
        sein. Konkret also bauen wir für
        obige Grammatik die folgenden Automatentransitionen:
      </p>
      <div class="math-block">
        $$
        \begin{align*}
        (q_1, S)&amp;\step{\epsilon} (q_1, A) \\
        (q_1, S)&amp;\step{\epsilon} (q_1, B) \\
        (q_1, S)&amp;\step{\epsilon} (q_1, C) \\
        (q_1, S)&amp;\step{\epsilon} (q_1, \epsilon) \\
        \hline
        (q_1,A)&amp;\step{\epsilon} (q_1, \texttt{\{} B \texttt{\}} S) \\
        \hline
        (q_1,B)&amp;\step{\epsilon} (q_1, \texttt{[} C \texttt{]} S) \\
        \hline
        (q_1,C)&amp;\step{\epsilon} (q_1, \texttt{(} A \texttt{)} S) \\
        (q_1,C)&amp;\step{\epsilon} (q_1, \texttt{(} \texttt{)} S) \\
        \hline
        (q_1,\texttt{\{})&amp;\step{\texttt{\{}} (q_1, \epsilon) \\
        (q_1,\texttt{\}})&amp;\step{\texttt{\}}} (q_1, \epsilon) \\
        (q_1,\texttt{[})&amp;\step{\texttt{[}} (q_1, \epsilon) \\
        (q_1,\texttt{]})&amp;\step{\texttt{]}} (q_1, \epsilon) \\
        (q_1,\texttt{(})&amp;\step{\texttt{(}} (q_1, \epsilon) \\
        (q_1,\texttt{)})&amp;\step{\texttt{)}} (q_1, \epsilon) \\
        \end{align*}
        $$
      </div>
      <p>
        Dies ist völlig mechanisch und benötigt kein Nachdenken. Wie
        fangen wir an? Wir legen anfangs ein $S$ auf den leeren Stack.
        Wenn dieses $S$ abgearbeitet ist und das Wort zu Ende ist,
        akzeptieren wir, und nur dann. Um festzustellen, dass wir
        wirklich den Stack ganz leer gemacht haben, brauchen wir die
        Markierung
        <span class="nowrap"><code><span>$</span></code>.</span>
        Also:
      </p>
      <div class="math-block">
        $$
        \begin{align*}
        (\qstart, \epsilon) \step{\epsilon} (q_1, S \$) \\
        (q_1, \$) \step{\epsilon} (\qend, \epsilon)
        \end{align*}
        $$
      </div>
      <p>
        Unsere Maschine hat also nur drei Zustände:
        <span class="nowrap">$\qstart$,</span>
        $q_1$ und
        <span class="nowrap">$\qend$,</span>
        welches der akeptierende Endzustand ist. Beachten Sie,
        dass es von $\qend$ aus keine ausgehenden Transitionen gibt;
        sollte es also nach Erreichen von $\qend$ noch weitere Zeichen
        im Eingabewort geben, so kann der Automat keine weiteren Schritte
        durchführen, was einem
        <i>reject</i>
        entspricht. Erreichen des
        Zustandes $\qend$ führt also nur dann zu einem
        <span class="nowrap"><i>accept</i>,</span>
        wenn
        dies am Ende des Wortes geschieht.
      </p>
      <div class="carousel__container">
        <div class="carousel">
          <div class="carousel__items">
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/01.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/02.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/03.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/04.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/05.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/06.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/07.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/08.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/09.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/10.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/11.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/12.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/13.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/14.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/15.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/16.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/17.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/18.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/19.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/20.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/21.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/22.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/23.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/24.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/25.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/26.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/27.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/28.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/29.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/30.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/31.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/32.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/33.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/34.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/35.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/36.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/37.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/38.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/39.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/40.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/41.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/42.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/43.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/44.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/45.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/46.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/47.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/48.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/49.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/50.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/51.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/52.svg"
              >
            </div>
            <div class="carousel__item">
              <img
                style="width:42em"
                src="./img/context-free/cfg-to-pda/53.svg"
              >
            </div>
          </div>
        </div>
      </div>
    </div>
    <p class="main-column">
      Die Gegenrichtung ist schwieriger.
    </p>
    <div class="well statement out">
      <p>
        <b>Theorem</b>
        <b>6.2.3</b>
        Zu jedem Kellerautomaten $M$ gibt es eine kontextfreie Grammatik
        $G$ mit
        <span class="nowrap">$L(M) = L(G)$.</span>
      </p>
    </div>
    <p class="main-column">
      Ich folge hier im Wesentlichen dem Beweis aus Sipsers Kapitel 2.
    </p>
    <div class="well highlight out">
      <p>
        <b>Beweis.</b>
        Sei $M = (\Sigma, Q, \Gamma, \qstart, F, \delta)$ der
        Kellerautomat. Als erstes führen wir drei Schönheitsoperation
        durch:
      </p>
      <ol>
        <li>
          <p>
            Der Automat hat einen einzigen akzeptierenden Zustand
            <span class="nowrap">$\qend$.</span>
            Dies können wir einfach durch $\epsilon$ -Übergänge
            erreichen.
          </p>
        </li>
        <li>
          <p>
            Der Automat leert den Stack, bevor er akzeptiert. Dies
            können wir z.B. dadurch erreichen, dass wir anfangs ein
            \(\$\) auf den Stack legen und am Ende den Stack poppen, bis
            wir \(\$\) gepoppt haben.
          </p>
        </li>
        <li>
          <p>
            Für jede Transition
          </p>
          <div class="math-block">
            $$
            \begin{align*}
            (p, x) \step{a} (q, y)
            \end{align*}
            $$
          </div>
          <p>
            ist genau eines von $x,y$ leer (und das andere ist genau ein
            Stacksymbol aus
            <span class="nowrap">$\Gamma$).</span>
            Eine Transition der Form
            $(p, \epsilon) \step{a} (q, x)$ nennen wir eine
            <span class="nowrap"><i>Push-Operation</i>,</span>
            eine der Form
            $(p, y) \step{a} (q, \epsilon)$ nennen wir eine
            <span class="nowrap"><i>Pop-Operation</i>.</span>
            Der Automat kann in diese Form gebracht
            werden, indem wir Zwischenzustände einführen:
          </p>
          <div class="math-block">
            $$
            \begin{align*}
            (p, x) \step{a} (q, y) \textnormal { wird ersetzt durch die zwei Transitionen }
            (p, x) \step{a} (p', \epsilon) \textnormal { und }(p', \epsilon) \step{a} (q, y) \\
            (p, \epsilon) \step{a} (q,\epsilon) \textnormal { wird ersetzt durch die zwei
            Transitionen }
            (p, \epsilon) \step{a} (p', \bigstar) \textnormal { und }(p', \bigstar) \step{a} (q,
            \epsilon) \ .
            \end{align*}
            $$
          </div>
          <p>
            Im zweiten Falle pushen wir also pro Forma ein ansonsten
            irrelevantes Symbol $\bigstar$ auf den Stack, um es gleich
            darauf runterzupoppen.
          </p>
        </li>
      </ol>
      <p>
        Wenn nun der Automat die eben beschriebene Form hat, so ist die
        Idee, dass wir für jedes Paar $p,q$ von Zuständen ein
        Nichtterminalsymbol $A_{pq}$ einführen, dass genau die Wörter $w$
        ableiten kann, für die
      </p>
      <div class="math-block">
        $$
        \begin{align*}
        (p, \epsilon) \Step{w}^* (q,\epsilon)
        \end{align*}
        $$
      </div>
      <p>
        gilt, die also den Automaten von $p$ nach $q$ bringen können,
        wobei der Stack am Anfang und am Ende leer ist. Dies kann auf
        zwei Weisen geschehen:
      </p>
      <ol>
        <li>
          <p>
            Fall 1: in der Konfigurationsfolge von
            $(p, \epsilon) \Step{w}^* (q,\epsilon)$ wird der Stack
            zwischendurch auch mal leer, und zwar nachdem der Präfix $u$
            des Wortes $w = uv$ gelesen ist, und der Automat ist zu
            diesem Zeitpunkt im Zustand
            <span class="nowrap">$r$.</span>
            Also:
          </p>
          <div class="math-block">
            $$
            \begin{align*}
            (p, \epsilon) \Step{u}^* (r,\epsilon) \Step{v}^* (q,\epsilon) \ .
            \end{align*}
            $$
          </div>
          <p>
            Es sollte also (wenn unsere Konstruktion erfolgreich ist)
            gelten, dass $A_{pr} \Rightarrow^* u$ und
            <span class="nowrap">$A_{rq} \Rightarrow^* v$.</span>
            Wir führen daher die
            Grammatikproduktion
          </p>
          <div class="math-block">
            $$
            \begin{align*}
            A_{pq} \rightarrow A_{pr} A_{rq}
            \end{align*}
            $$
          </div>
          <p>
            ein.
          </p>
        </li>
        <li>
          <p>
            Fall 2: in der Konfigurationsfolge von
            $(p, \epsilon) \Step{w}^* (q,\epsilon)$ ist der Stack
            zwischendurch nie leer. Das heißt wiederum, dass das im
            ersten Schritt gepushte Stacksymbol $x$ am Ende gepoppt
            wird, also $w = avb$ mit
          </p>
          <div class="math-block">
            $$
            \begin{align*}
            (p, \epsilon) \step{a} (r, x) \Step{v}^* (s,x) \step{b} (q,\epsilon)
            \end{align*}
            $$
          </div>
          <p>
            Hier ist wichtig zu wissen, dass die erste Operation eine
            Push-Operation sein muss: Pop kann sie eh nicht sein, und die
            Möglichkeit $(p,\epsilon) \step{a} (r, \epsilon)$ haben wir
            durch unsere Schönheitsoperationen ausgeschlossen. Des
            weiteren ist zu beachten, dass in der Konfigurationsfolge von
            $(r, x) \Step{v}^* (s,x)$ der Stack nie leer wird. Keine
            Transition "liest" also das unterste Zeichen $x$ -- denn
            dann müsste nacha Schönheitsoperation das $x$ ja gepoppt
            werden und der Stack würde vollständig geleert. In anderen
            Worten: die Konfigurationsfolge wäre auch dann gültig, wenn
            Anfangs- und Endstack nicht $[x]$ sondern
            <span class="nowrap">$\epsilon$,</span>
            also
            der leere Stack wäre:
          </p>
          <div class="math-block">
            $$
            \begin{align*}
            (r, \epsilon) \Step{v}^* (s,\epsilon) \ .
            \end{align*}
            $$
          </div>
          <p>
            Wenn unsere Konstruktion Erfolg hat, hieße das also
            $A_{rs} \Rightarrow^* v$ und somit ist
          </p>
          <div class="math-block">
            $$
            \begin{align*}
            A_{pq} \rightarrow a A_{rs} b
            \end{align*}
            $$
          </div>
          <p>
            eine gültige Regel.
          </p>
        </li>
      </ol>
      <p>
        Schlussendlich führen wir noch die offensichtlich korrekten
        Regeln $A_pp \rightarrow \epsilon$ ein, da ja
        $(p, \epsilon) \Step{\epsilon}^* (p, \epsilon)$ offensichtlich
        gilt (da ja $\Step{}^*$ auch die aus null Übergangen bestehende
        Konfigurationsfolge erlaubt). Zusammenfassend gesagt besteht
        unsere Grammatik $G$ aus drei unterschiedlichen Typen von
        Regeln:
      </p>
      <div class="math-block">
        $$
        \begin{align*}
        A_{pp}&amp;\rightarrow \epsilon \textnormal{ für jeden Zustand \(p \in Q\)} \\
        A_{pq}&amp;\rightarrow A_{pr}A_{rq} \textnormal{ für alle Zustände $p,q,r \in Q$} \\
        A_{pq}&amp;\rightarrow a A_{rs} b \textnormal{ für alle Pushp-Pop-Paare
        $(p,\epsilon) \step{a} (r,x)$, $(s,x) \step{b} (q,\epsilon)$ von Transitionen}
        \end{align*}
        $$
      </div>
      <p>
        Das Startsymbol der Grammatik ist natürlich
        <span class="nowrap">$A_{\qstart, \qend}$.</span>
        Auch hier verzichte ich auf einen formalen Beweis, dass
        $L(G)=L(M)$ gilt. Der Beweis verwendet (wenig überraschend)
        Induktion über die Länge der Ableitung bzw. Induktion über die
        Länge der Konfigurationsfolge und ist in Sipsers Lehrbuch im
        Detail erklärt.<span style="color:#0000;visibility:none;">A</span><span class="qed">\(\square\)</span>
      </p>
    </div>
    <div class="well statement out">
      <p>
        <b>Beispiel</b>
        <b>6.2.4</b>
        Wir betrachten die Sprache
      </p>
      <div class="math-block">
        $$
        \begin{align*}
        a^m b (a|b)^* b a^m
        \end{align*}
        $$
      </div>
      <p>
        Diese ist
        <i>nicht</i>
        regulär, da der Präfix und der Suffix aus $a$
        die gleiche Länge $m$ haben müssen. Wir bauen zuerst einen
        Kellerautomaten und übersetzen den dann entsprechend dem Schema
        aus dem letzten Theorem in eine Grammatik. Dann vergleichen wir
        die entstandene Grammatik mit der, die wir per Hand aus der
        obigen Sprachbeschreibung bauen würden. Unser Automat hat einen
        Zustand
        <span class="nowrap">$q_1$,</span>
        in welchem er führenden $a$ 's auf den Stack legt
        und einen Zustand
        <span class="nowrap">$q_3$,</span>
        in welchem er die
        <span class="nowrap">$a$'s</span>
        am Ende liest
        und vom Stack poppt. Zwischen den beiden
        <span class="nowrap">$b$'s</span>
        in der Mitte ist
        er in einem Zustand
        <span class="nowrap">$q_2$,</span>
        in welchem er die Eingabesymbole mehr
        oder weniger ignoriert. Der Automat muss nichtdeterministisch
        sein, da er "erraten" muss, welches $b$ das letzte ist, weil er
        dann mit dem Stack-Poppen beginnen muss.
      </p>
      <div class="math-block">
        $$
        \begin{align*}
        (\qstart, \epsilon)&amp;\step{\epsilon} (q_1, \$) \\ \hline
        (q_1, \epsilon)&amp;\step{a} (q_1, a) \\
        (q_1, \epsilon)&amp;\step{b} (q_2, b) \\
        \textcolor{red}{(q_2, \epsilon)}&amp;\textcolor{red}{ \step{a} (q_2, \epsilon)} \\
        \textcolor{red}{(q_2, \epsilon)}&amp;\textcolor{red}{ \step{b} (q_2, \epsilon)} \\
        (q_2, b)&amp;\step{b} (q_3, \epsilon) \\
        (q_3, a)&amp;\step{a} (q_3, \epsilon) \\ \hline
        (q_3, \$)&amp;\step{\epsilon} (\qend, \epsilon)
        \end{align*}
        $$
      </div>
      <p>
        Die beiden rot gefärbten Transitionen benötigen eine
        Schönheitsoperation:<span style="color:purple">
          <div class="math-block">
            $$
            \begin{align*}
            (q_2, \epsilon)&amp;\step{a} (q'_2, x) \\
            (q_2, \epsilon)&amp;\step{b} (q'_2, x) \\
            (q'_2, x)&amp;\step{\epsilon} (q_2, \epsilon) \\
            \end{align*}
            $$
          </div>
        </span>Unsere Zustandsmenge ist also
        <span class="nowrap">$Q = \{\qstart, q_1, q_2, q'_2, q_3, \qend\}$.</span>
        Rein theoretisch
        müssten wir nun für alle Tripel $p,r,q$ von Zuständen eine
        Produktion $A_{pq} \rightarrow A_{pr} A_{rq}$ einführen, also
        allein hierfür schon $5^3 = 125$ Produktionen. Wir können das
        reduzieren, indem wir die im Beweis beschriebene mechanische
        Prozedur mit ein wenig selbständigem Denken kombinieren. Die
        erste Beobachtung ist, dass wir gar nicht von jedem Zustand zu
        jedem kommen können, sondern nur "vorwärts", also wie in diesem
        Diagramm:
      </p>
      <div class="figure__container">
        <figure>
          <img
            style="height:10em"
            src="./img/context-free/pda-to-cfg-diagram.svg"
          >
        </figure>
      </div>
      <p>
        Nichtterminale wie $A_{31}$ führen wir also gar nicht erst ein.
        Auch schreiben wir $A_{13}$ statt $A_{q_1q_3}$ und verwenden die
        Indizes 0 für $\qstart$ und 4 für
        <span class="nowrap">$\qend$.</span>
        Als zweite
        Beobachtung sehen wir, dass man mit leerem Stapel beispielsweise
        gar nicht von $\qstart$ nach $q_3$ kommt: auf dem Weg dorthin
        wird ein \(\$\) gepusht und nie gepoppt; gleiches gilt für viele
        weitere Zustandspaare. Das erweiterte Diagramm hier gibt eine
        Orientierung. Neben jeden Zustand haben wir schematisch den Stack
        gemalt:
      </p>
      <div class="figure__container">
        <figure>
          <img
            style="height:10em"
            src="./img/context-free/pda-to-cfg-diagram-stack.svg"
          >
        </figure>
      </div>
      <p>
        Die einzigen Nichtterminale sind also die "trivialen" der Form
        $A_{qq}$ und darüberhinaus
      </p>
      <div class="math-block">
        $$
        \begin{align*}
        A_{04}, A_{13}
        \end{align*}
        $$
      </div>
      <p>
        Da man von $\qstart$ zu sich selber und von $\qend$ zu sich
        selber nur mit dem leeren Wort gelant, ersetzen wir $A_{00}$ und
        $A_{44}$ sofort durch
        <span class="nowrap">$\epsilon$.</span>
        Als Produktionen der Form
        $A_{pq} \rightarrow A_{pr} A_{rq}$ erhalten wir also:
      </p>
      <div class="math-block">
        $$
        \begin{align*}
        A_{11}&amp;\rightarrow A_{11} A_{11} \\
        A_{13}&amp;\rightarrow A_{11} A_{13} \\
        A_{13}&amp;\rightarrow A_{13} A_{33} \\
        A_{22}&amp;\rightarrow A_{22} A_{22} \\
        A_{33}&amp;\rightarrow A_{33} A_{33}
        \end{align*}
        $$
      </div>
      <p>
        Schon deutlich besser als die 125 Produktionen, die wir bekämen,
        wenn wir stur an der Methode im Beweis festhalten würden. Wir
        brauchen noch Produktionen der Form
        <span class="nowrap">$A_{pq} \rightarrow a A_{rs} b$.</span>
        Dafür müssen wir nach
        Push-Pop-Paaren $(p,\epsilon) \step{a} (r,x)$ ,
        $(s,x) \step{b} (q,\epsilon)$ suchen. Stack-Symbole sind
        <span class="nowrap">$a, b, x$.</span>
        Suchen wir also zuerst nach Paaren von Transitionen,
        die $a$ pushen und poppen.
      </p>
      <div class="math-block">
        $$
        \begin{align*}
        (q_1, \epsilon) \step{a} (q_1, a) \textnormal{ und }
        (q_3, a) \step{a} (q_3, \epsilon) \textnormal{ ergibt die Produktion }
        A_{13} \rightarrow a A_{13} a
        \end{align*}
        $$
      </div>
      <p>
        Das waren die einzigen Transitionen, in denen $a$ gepusht und
        gepoppt wird. Betrachten wir als nächstes das Stacksymbol $b$ :
      </p>
      <div class="math-block">
        $$
        \begin{align*}
        (q_1, \epsilon) \step{b} (q_2, b) \textnormal{ und }
        (q_2, b) \step{a} (q_3, \epsilon) \textnormal{ ergibt die Produktion }
        A_{13} \rightarrow b A_{22} b
        \end{align*}
        $$
      </div>
      <p>
        Nun zu den Transitionen mit Stacksymbol
        <span class="nowrap">$x$.</span>
        Da gibt es zwei
        Push-Transitionen und eine Pop-Transition, also zwei Paare:
      </p>
      <div class="math-block">
        $$
        \begin{align*}
        (q_2, \epsilon) \step{a} (q'_2, x) \textnormal { und }
        (q'_2, x) \step{\epsilon} (q_2, \epsilon) \textnormal{ ergibt die Produktion }
        A_{22} \rightarrow a A_{2'2'} \\
        (q_2, \epsilon) \step{b} (q'_2, x) \textnormal { und }
        (q'_2, x) \step{\epsilon} (q_2, \epsilon) \textnormal{ ergibt die Produktion }
        A_{22} \rightarrow b A_{2'2'} \\
        \end{align*}
        $$
      </div>
      <p>
        Und schlussendlich die mit Stacksymbol
        <span>$</span>. Da gibt es eine Push-
        und eine Pop-Transition:
      </p>
      <div class="math-block">
        $$
        \begin{align*}
        (\qstart, \epsilon) \step{\epsilon} (q_1, \$) \textnormal {und }
        (q_3, \$) \step{\epsilon} (\qend, \epsilon) \textnormal{ ergibt die Produktion }
        A_{04} \rightarrow A_{13} \\
        \end{align*}
        $$
      </div>
      <p>
        Sammeln wir nun alle Produktionen:
      </p>
      <div class="math-block">
        $$
        \begin{align*}
        \textcolor{red}{A_{11}}&amp;\textcolor{red}{\rightarrow A_{11} A_{11}} \\
        A_{13}&amp;\rightarrow \textcolor{red}{A_{11}} A_{13} \\
        A_{13}&amp;\rightarrow A_{13} \textcolor{red}{A_{33}} \\
        A_{22}&amp;\rightarrow A_{22} A_{22} \\
        \textcolor{red}{A_{33}}&amp;\textcolor{red}{\rightarrow A_{33} A_{33}} \\ \hline
        A_{13}&amp;\rightarrow a A_{13} a \\
        A_{13}&amp;\rightarrow b A_{22} b \\
        A_{22}&amp;\rightarrow a \textcolor{red}{A_{2'2'}} \\
        A_{22}&amp;\rightarrow b \textcolor{red}{A_{2'2'}} \\
        A_{04}&amp;\rightarrow A_{13}\\ \hline
        \textcolor{red}{A_{00}}&amp;\textcolor{red}{\rightarrow \epsilon} \\
        \textcolor{red}{A_{11}}&amp;\textcolor{red}{\rightarrow \epsilon} \\
        A_{22}&amp;\rightarrow \epsilon \\
        \textcolor{red}{A_{2'2'}}&amp;\textcolor{red}{\rightarrow \epsilon} \\
        \textcolor{red}{A_{33}}&amp;\textcolor{red}{\rightarrow \epsilon} \\
        \textcolor{red}{A_{44}}&amp;\textcolor{red}{\rightarrow \epsilon} \\
        \end{align*}
        $$
      </div>
      <p>
        wobei $A_{04}$ das Startsymbol ist. Wir haben diejenigen
        Nichtterminale und Produktionen rot markiert, aus denen nur
        $\epsilon$ hervorgehen kann. Wir können die Grammatik nun
        entsprechend vereinfachen. Zusätzlich löschen wir $A_{04}$ und
        ernennen $A_{13}$ zu unserem Startsymbol:
      </p>
      <div class="math-block">
        $$
        \begin{align*}
        A_{22}&amp;\rightarrow A_{22} A_{22} \\
        A_{13}&amp;\rightarrow a A_{13} a \\
        A_{13}&amp;\rightarrow b A_{22} b \\
        A_{22}&amp;\rightarrow a \\
        A_{22}&amp;\rightarrow b \\ \hline
        A_{22}&amp;\rightarrow \epsilon \\
        \end{align*}
        $$
      </div>
      <p>
        Überlegen wir nun, ausgehend von dieser Grammatik, was wir aus
        dem Startsymbol $A_{13}$ ableiten können. Die einzigen zwei
        Produktionen mit $A_{13}$ sind $A_{13} \rightarrow a A_{13} a$
        und
        <span class="nowrap">$A_{13} \rightarrow b A_{22}$,</span>
        also gilt
      </p>
      <div class="math-block">
        $$
        \begin{align*}
        A_{13} \Rightarrow^* a^m b A_{22} b a^m \ .
        \end{align*}
        $$
      </div>
      <p>
        Aus $A_{22}$ können wir per Produktion
        $A_{22} \rightarrow A_{22} A_{22}$ erst einmal alle Wortformem
        der Form $A_{22}^*$ ableiten; per
        $A_{22} \rightarrow a \ | \ b \ | \ \epsilon$ dann alle Wortform
        <span class="nowrap">$(a|b)^*$.</span>
        Also:
      </p>
      <div class="math-block">
        $$
        \begin{align*}
        A_{13} \Step{}^* a^m b (a|b)^* b a^m \ .
        \end{align*}
        $$
      </div>
      <p>
        Die Grammatik erzeugt also die gewünschte Sprache.
      </p>
    </div>
    <div id="end-of-page-elt">
    </div>
    <div id="bottom-menu">
      <div class="bottom-menu-left">
        <a href="./6-1.html">&lt;&lt; Kapitel 6.1<span
            style="visibility:hidden"
            id="bottom-prev-page-tooltip"
          >
            <p>
              Ableitungen und Ableitungsbäume
            </p>
          </span></a>
      </div>
      <div class="bottom-menu-right">
        <a href="./6-3.html">Kapitel 6.3 &gt;&gt;<span
            style="visibility:hidden"
            id="bottom-next-page-tooltip"
          >
            <p>
              Rechnerübung: Gute kontextfreie Grammatiken entwerfen
            </p>
          </span></a>
      </div>
    </div>
  </div>
</body>
</html>
